{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fernando.iglesias/Desktop/%C3%9Atil/UFMS/Proj%20Integrador%20II/Avaliacao-iii/src/components/map.js"],"sourcesContent":["'use client';\r\nimport dynamic from 'next/dynamic';\r\n\r\nconst DynamicMap = dynamic(() => import('./MapLeaflet'), {\r\n  ssr: false,\r\n  loading: () => <p>Carregando mapa...</p>,\r\n});\r\n\r\nexport default function Mapa({ allMarkers = [] }) {\r\n  return <DynamicMap allMarkers={allMarkers} />;\r\n}"],"names":[],"mappings":";;;;AACA;;AADA;;;AAGA,MAAM,aAAa,CAAA,GAAA,kKAAA,CAAA,UAAO,AAAD,EAAE;;;;;;IACzB,KAAK;IACL,SAAS,kBAAM,6LAAC;sBAAE;;;;;;;KAFd;AAKS,SAAS,KAAK,EAAE,aAAa,EAAE,EAAE;IAC9C,qBAAO,6LAAC;QAAW,YAAY;;;;;;AACjC;MAFwB","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fernando.iglesias/Desktop/%C3%9Atil/UFMS/Proj%20Integrador%20II/Avaliacao-iii/src/components/submitFocos.js"],"sourcesContent":["'use client';\r\nimport { useEffect } from 'react';\r\nimport { OpenStreetMapProvider } from 'leaflet-geosearch';\r\n\r\nexport default function SubmitFocos() {\r\n  useEffect(() => {\r\n    const form = document.getElementById('form-cadastro-foco');\r\n    if (!form) return;\r\n\r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      \r\n      const formData = new FormData(form);\r\n      const imageFile = formData.get('add-img');\r\n      \r\n      try {\r\n        let imageUrl = null;\r\n        if (imageFile && imageFile.size > 0) {\r\n          const uploadFormData = new FormData();\r\n          uploadFormData.append('file', imageFile);\r\n          \r\n          const uploadResponse = await fetch('/api/upload', {\r\n            method: 'POST',\r\n            body: uploadFormData,\r\n          });\r\n          \r\n          if (!uploadResponse.ok) {\r\n            throw new Error('Falha no upload da imagem');\r\n          }\r\n          \r\n          const uploadData = await uploadResponse.json();\r\n          imageUrl = uploadData.url;\r\n        }\r\n\r\n        const provider = new OpenStreetMapProvider();\r\n        const endereco = formData.get('addrs-foco');\r\n        const results = await provider.search({ query: endereco });\r\n        \r\n        if (results.length === 0) {\r\n          throw new Error('Endereço não encontrado');\r\n        }\r\n\r\n        const { x: lng, y: lat } = results[0];\r\n\r\n        const focoData = {\r\n          nome: formData.get('name'),\r\n          endereco,\r\n          tipo: formData.get('tipo-foco'),\r\n          imagem: imageUrl,\r\n          lat,\r\n          lng\r\n        };\r\n\r\n        const response = await fetch('/api/focos', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(focoData),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Erro ao registrar foco');\r\n        }\r\n\r\n        alert('Foco registrado com sucesso!');\r\n        form.reset();\r\n        window.location.reload();\r\n      } catch (error) {\r\n        console.error('Erro:', error);\r\n        alert('Erro: ' + error.message);\r\n      }\r\n    };\r\n\r\n    form.addEventListener('submit', handleSubmit);\r\n    return () => {\r\n      form.removeEventListener('submit', handleSubmit);\r\n    };\r\n  }, []);\r\n\r\n  return null;\r\n}"],"names":[],"mappings":";;;AACA;AACA;;AAFA;;;AAIe,SAAS;;IACtB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM,OAAO,SAAS,cAAc,CAAC;YACrC,IAAI,CAAC,MAAM;YAEX,MAAM;sDAAe,OAAO;oBAC1B,EAAE,cAAc;oBAEhB,MAAM,WAAW,IAAI,SAAS;oBAC9B,MAAM,YAAY,SAAS,GAAG,CAAC;oBAE/B,IAAI;wBACF,IAAI,WAAW;wBACf,IAAI,aAAa,UAAU,IAAI,GAAG,GAAG;4BACnC,MAAM,iBAAiB,IAAI;4BAC3B,eAAe,MAAM,CAAC,QAAQ;4BAE9B,MAAM,iBAAiB,MAAM,MAAM,eAAe;gCAChD,QAAQ;gCACR,MAAM;4BACR;4BAEA,IAAI,CAAC,eAAe,EAAE,EAAE;gCACtB,MAAM,IAAI,MAAM;4BAClB;4BAEA,MAAM,aAAa,MAAM,eAAe,IAAI;4BAC5C,WAAW,WAAW,GAAG;wBAC3B;wBAEA,MAAM,WAAW,IAAI,sKAAA,CAAA,wBAAqB;wBAC1C,MAAM,WAAW,SAAS,GAAG,CAAC;wBAC9B,MAAM,UAAU,MAAM,SAAS,MAAM,CAAC;4BAAE,OAAO;wBAAS;wBAExD,IAAI,QAAQ,MAAM,KAAK,GAAG;4BACxB,MAAM,IAAI,MAAM;wBAClB;wBAEA,MAAM,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,OAAO,CAAC,EAAE;wBAErC,MAAM,WAAW;4BACf,MAAM,SAAS,GAAG,CAAC;4BACnB;4BACA,MAAM,SAAS,GAAG,CAAC;4BACnB,QAAQ;4BACR;4BACA;wBACF;wBAEA,MAAM,WAAW,MAAM,MAAM,cAAc;4BACzC,QAAQ;4BACR,SAAS;gCAAE,gBAAgB;4BAAmB;4BAC9C,MAAM,KAAK,SAAS,CAAC;wBACvB;wBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;4BAChB,MAAM,IAAI,MAAM;wBAClB;wBAEA,MAAM;wBACN,KAAK,KAAK;wBACV,OAAO,QAAQ,CAAC,MAAM;oBACxB,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,SAAS;wBACvB,MAAM,WAAW,MAAM,OAAO;oBAChC;gBACF;;YAEA,KAAK,gBAAgB,CAAC,UAAU;YAChC;yCAAO;oBACL,KAAK,mBAAmB,CAAC,UAAU;gBACrC;;QACF;gCAAG,EAAE;IAEL,OAAO;AACT;GA3EwB;KAAA","debugId":null}}]
}