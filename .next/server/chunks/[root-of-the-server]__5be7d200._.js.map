{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fernando.iglesias/Desktop/%C3%9Atil/UFMS/Proj%20Integrador%20II/Avaliacao-iii/src/lib/db.js"],"sourcesContent":["import Database from 'better-sqlite3';\r\nimport path from 'path';\r\nimport fs from 'fs';\r\n\r\nconst dbFile = path.join(process.cwd(), 'db.sqlite');\r\n\r\nfunction initializeDatabase() {\r\n  if (!fs.existsSync(dbFile)) {\r\n    const dbInit = new Database(dbFile);\r\n    try {\r\n      dbInit.exec(`\r\n        CREATE TABLE focos (\r\n          id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n          nome TEXT NOT NULL,\r\n          endereco TEXT NOT NULL,\r\n          tipo TEXT NOT NULL,\r\n          imagem TEXT,\r\n          lat REAL NOT NULL,\r\n          lng REAL NOT NULL,\r\n          data_registro TEXT DEFAULT CURRENT_TIMESTAMP\r\n        )\r\n      `);\r\n      console.log('Banco de dados inicializado com sucesso');\r\n    } catch (error) {\r\n      console.error('Erro ao inicializar banco de dados:', error);\r\n    } finally {\r\n      dbInit.close();\r\n    }\r\n  }\r\n}\r\n\r\ninitializeDatabase();\r\n\r\nconst db = new Database(dbFile, { verbose: console.log });\r\n\r\nexport function insertFoco(foco) {\r\n  try {\r\n    const stmt = db.prepare(`\r\n      INSERT INTO focos (nome, endereco, tipo, imagem, lat, lng)\r\n      VALUES (?, ?, ?, ?, ?, ?)\r\n    `);\r\n    const info = stmt.run(foco.nome, foco.endereco, foco.tipo, foco.imagem, foco.lat, foco.lng);\r\n    return { id: info.lastInsertRowid, ...foco };\r\n  } catch (error) {\r\n    console.error('Erro ao inserir foco:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function getAllFocos() {\r\n  try {\r\n    const stmt = db.prepare(`SELECT * FROM focos ORDER BY data_registro DESC`);\r\n    return stmt.all();\r\n  } catch (error) {\r\n    console.error('Erro ao buscar focos:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function deleteFoco(id) {\r\n  try {\r\n    const stmt = db.prepare(`DELETE FROM focos WHERE id = ?`);\r\n    const info = stmt.run(id);\r\n    return { changes: info.changes };\r\n  } catch (error) {\r\n    console.error('Erro ao deletar foco:', error);\r\n    throw error;\r\n  }\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,SAAS,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAExC,SAAS;IACP,IAAI,CAAC,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,SAAS;QAC1B,MAAM,SAAS,IAAI,2HAAA,CAAA,UAAQ,CAAC;QAC5B,IAAI;YACF,OAAO,IAAI,CAAC,CAAC;;;;;;;;;;;MAWb,CAAC;YACD,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uCAAuC;QACvD,SAAU;YACR,OAAO,KAAK;QACd;IACF;AACF;AAEA;AAEA,MAAM,KAAK,IAAI,2HAAA,CAAA,UAAQ,CAAC,QAAQ;IAAE,SAAS,QAAQ,GAAG;AAAC;AAEhD,SAAS,WAAW,IAAI;IAC7B,IAAI;QACF,MAAM,OAAO,GAAG,OAAO,CAAC,CAAC;;;IAGzB,CAAC;QACD,MAAM,OAAO,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,KAAK,QAAQ,EAAE,KAAK,IAAI,EAAE,KAAK,MAAM,EAAE,KAAK,GAAG,EAAE,KAAK,GAAG;QAC1F,OAAO;YAAE,IAAI,KAAK,eAAe;YAAE,GAAG,IAAI;QAAC;IAC7C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF;AAEO,SAAS;IACd,IAAI;QACF,MAAM,OAAO,GAAG,OAAO,CAAC,CAAC,+CAA+C,CAAC;QACzE,OAAO,KAAK,GAAG;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF;AAEO,SAAS,WAAW,EAAE;IAC3B,IAAI;QACF,MAAM,OAAO,GAAG,OAAO,CAAC,CAAC,8BAA8B,CAAC;QACxD,MAAM,OAAO,KAAK,GAAG,CAAC;QACtB,OAAO;YAAE,SAAS,KAAK,OAAO;QAAC;IACjC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fernando.iglesias/Desktop/%C3%9Atil/UFMS/Proj%20Integrador%20II/Avaliacao-iii/src/app/api/focos/route.js"],"sourcesContent":["import { getAllFocos, insertFoco, deleteFoco } from '@/lib/db';\r\n\r\nexport async function GET() {\r\n  try {\r\n    const focos = await getAllFocos();\r\n    return Response.json(focos);\r\n  } catch (error) {\r\n    return Response.json(\r\n      { error: 'Erro ao buscar focos no banco de dados' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const body = await request.json();\r\n    const novoFoco = await insertFoco(body);\r\n    return Response.json(novoFoco, { status: 201 });\r\n  } catch (error) {\r\n    return Response.json(\r\n      { error: 'Erro ao inserir foco no banco de dados' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(request, { params }) {\r\n  try {\r\n    const { id } = await params;\r\n    const result = await deleteFoco(id);\r\n    \r\n    if (result.changes === 0) {\r\n      return Response.json({ error: 'Foco n√£o encontrado' }, { status: 404 });\r\n    }\r\n    \r\n    return Response.json({ message: 'Foco deletado com sucesso' });\r\n  } catch (error) {\r\n    return Response.json(\r\n      { error: 'Erro ao deletar foco' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;;AAAA;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,QAAQ,MAAM,CAAA,GAAA,kHAAA,CAAA,cAAW,AAAD;QAC9B,OAAO,SAAS,IAAI,CAAC;IACvB,EAAE,OAAO,OAAO;QACd,OAAO,SAAS,IAAI,CAClB;YAAE,OAAO;QAAyC,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,WAAW,MAAM,CAAA,GAAA,kHAAA,CAAA,aAAU,AAAD,EAAE;QAClC,OAAO,SAAS,IAAI,CAAC,UAAU;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,OAAO;QACd,OAAO,SAAS,IAAI,CAClB;YAAE,OAAO;QAAyC,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,OAAO,OAAO,EAAE,EAAE,MAAM,EAAE;IAC9C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,SAAS,MAAM,CAAA,GAAA,kHAAA,CAAA,aAAU,AAAD,EAAE;QAEhC,IAAI,OAAO,OAAO,KAAK,GAAG;YACxB,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS;QAA4B;IAC9D,EAAE,OAAO,OAAO;QACd,OAAO,SAAS,IAAI,CAClB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}