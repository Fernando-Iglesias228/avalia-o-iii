{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fernando.iglesias/Desktop/%C3%9Atil/UFMS/Proj%20Integrador%20II/Avaliacao-iii/src/components/map.js"],"sourcesContent":["'use client';\r\nimport dynamic from 'next/dynamic';\r\n\r\nconst DynamicMap = dynamic(() => import('./mapLeaflet'), {\r\n  ssr: false,\r\n  loading: () => <p>Carregando mapa...</p>,\r\n});\r\n\r\nexport default function Mapa({ allMarkers = [] }) {\r\n  return <DynamicMap allMarkers={allMarkers} />;\r\n}"],"names":[],"mappings":";;;;AACA;;AADA;;;AAGA,MAAM,aAAa,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD;;;;;;IACvB,KAAK;IACL,SAAS,kBAAM,8OAAC;sBAAE;;;;;;;AAGL,SAAS,KAAK,EAAE,aAAa,EAAE,EAAE;IAC9C,qBAAO,8OAAC;QAAW,YAAY;;;;;;AACjC","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fernando.iglesias/Desktop/%C3%9Atil/UFMS/Proj%20Integrador%20II/Avaliacao-iii/src/components/submitFocos.js"],"sourcesContent":["'use client';\r\nimport { useEffect } from 'react';\r\nimport { OpenStreetMapProvider } from 'leaflet-geosearch';\r\n\r\nexport default function SubmitFocos() {\r\n  useEffect(() => {\r\n    const form = document.getElementById('form-cadastro-foco');\r\n    if (!form) return;\r\n\r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      \r\n      const formData = new FormData(form);\r\n      const imageFile = formData.get('add-img');\r\n      \r\n      try {\r\n        let imageUrl = null;\r\n        if (imageFile && imageFile.size > 0) {\r\n          const uploadFormData = new FormData();\r\n          uploadFormData.append('file', imageFile);\r\n          \r\n          const uploadResponse = await fetch('/api/upload', {\r\n            method: 'POST',\r\n            body: uploadFormData,\r\n          });\r\n          \r\n          if (!uploadResponse.ok) {\r\n            throw new Error('Falha no upload da imagem');\r\n          }\r\n          \r\n          const uploadData = await uploadResponse.json();\r\n          imageUrl = uploadData.url;\r\n        }\r\n\r\n        const provider = new OpenStreetMapProvider();\r\n        const endereco = formData.get('addrs-foco');\r\n        const results = await provider.search({ query: endereco });\r\n        \r\n        if (results.length === 0) {\r\n          throw new Error('Endereço não encontrado');\r\n        }\r\n\r\n        const { x: lng, y: lat } = results[0];\r\n\r\n        const focoData = {\r\n          nome: formData.get('name'),\r\n          endereco,\r\n          tipo: formData.get('tipo-foco'),\r\n          imagem: imageUrl,\r\n          lat,\r\n          lng\r\n        };\r\n\r\n        const response = await fetch('/api/focos', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(focoData),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Erro ao registrar foco');\r\n        }\r\n\r\n        alert('Foco registrado com sucesso!');\r\n        form.reset();\r\n        window.location.reload();\r\n      } catch (error) {\r\n        console.error('Erro:', error);\r\n        alert('Erro: ' + error.message);\r\n      }\r\n    };\r\n\r\n    form.addEventListener('submit', handleSubmit);\r\n    return () => {\r\n      form.removeEventListener('submit', handleSubmit);\r\n    };\r\n  }, []);\r\n\r\n  return null;\r\n}"],"names":[],"mappings":";;;AACA;AACA;AAFA;;;AAIe,SAAS;IACtB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,OAAO,SAAS,cAAc,CAAC;QACrC,IAAI,CAAC,MAAM;QAEX,MAAM,eAAe,OAAO;YAC1B,EAAE,cAAc;YAEhB,MAAM,WAAW,IAAI,SAAS;YAC9B,MAAM,YAAY,SAAS,GAAG,CAAC;YAE/B,IAAI;gBACF,IAAI,WAAW;gBACf,IAAI,aAAa,UAAU,IAAI,GAAG,GAAG;oBACnC,MAAM,iBAAiB,IAAI;oBAC3B,eAAe,MAAM,CAAC,QAAQ;oBAE9B,MAAM,iBAAiB,MAAM,MAAM,eAAe;wBAChD,QAAQ;wBACR,MAAM;oBACR;oBAEA,IAAI,CAAC,eAAe,EAAE,EAAE;wBACtB,MAAM,IAAI,MAAM;oBAClB;oBAEA,MAAM,aAAa,MAAM,eAAe,IAAI;oBAC5C,WAAW,WAAW,GAAG;gBAC3B;gBAEA,MAAM,WAAW,IAAI,mKAAA,CAAA,wBAAqB;gBAC1C,MAAM,WAAW,SAAS,GAAG,CAAC;gBAC9B,MAAM,UAAU,MAAM,SAAS,MAAM,CAAC;oBAAE,OAAO;gBAAS;gBAExD,IAAI,QAAQ,MAAM,KAAK,GAAG;oBACxB,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,OAAO,CAAC,EAAE;gBAErC,MAAM,WAAW;oBACf,MAAM,SAAS,GAAG,CAAC;oBACnB;oBACA,MAAM,SAAS,GAAG,CAAC;oBACnB,QAAQ;oBACR;oBACA;gBACF;gBAEA,MAAM,WAAW,MAAM,MAAM,cAAc;oBACzC,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;gBACvB;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM;gBACN,KAAK,KAAK;gBACV,OAAO,QAAQ,CAAC,MAAM;YACxB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,SAAS;gBACvB,MAAM,WAAW,MAAM,OAAO;YAChC;QACF;QAEA,KAAK,gBAAgB,CAAC,UAAU;QAChC,OAAO;YACL,KAAK,mBAAmB,CAAC,UAAU;QACrC;IACF,GAAG,EAAE;IAEL,OAAO;AACT","debugId":null}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fernando.iglesias/Desktop/%C3%9Atil/UFMS/Proj%20Integrador%20II/Avaliacao-iii/src/components/enderecoAutoComplete.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function EnderecoAutoComplete() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (query.length < 3) {\r\n      setSuggestions([]);\r\n      return;\r\n    }\r\n\r\n    const timeout = setTimeout(() => {\r\n      const bbox = \"-54.75,-20.6,-54.45,-20.3\";\r\n      const url = `https://photon.komoot.io/api/?q=${encodeURIComponent(query)}&limit=10&bbox=${bbox}`;\r\n\r\n      fetch(url)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          const rawSuggestions = data.features || [];\r\n\r\n          const uniqueMap = new Map();\r\n\r\n          rawSuggestions.forEach((sug) => {\r\n            const { name, street, city, country } = sug.properties;\r\n            const full = [name, street, city, country].filter(Boolean).join(\", \");\r\n            if (!uniqueMap.has(full)) {\r\n              uniqueMap.set(full, sug);\r\n            }\r\n          });\r\n\r\n          setSuggestions(Array.from(uniqueMap.values()));\r\n        })\r\n        .catch(err => {\r\n          console.error(\"Erro ao buscar sugestões:\", err);\r\n          setSuggestions([]);\r\n        });\r\n    }, 300);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [query]);\r\n\r\n  const handleSelect = (suggestion) => {\r\n    const { name, street, city, country } = suggestion.properties;\r\n    const full = [name, street, city, country].filter(Boolean).join(\", \");\r\n    setQuery(full);\r\n    setSuggestions([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-3 position-relative\">\r\n      <label htmlFor=\"addrs-foco\" className=\"form-label\">Endereço do foco: *</label>\r\n      <input\r\n        type=\"text\"\r\n        className=\"form-control\"\r\n        id=\"addrs-foco\"\r\n        name=\"addrs-foco\"\r\n        required\r\n        autoComplete=\"off\"\r\n        value={query}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n      />\r\n      {suggestions.length > 0 && (\r\n        <div className=\"list-group position-absolute w-100 z-3\" style={{ maxHeight: 200, overflowY: \"auto\" }}>\r\n          {suggestions.map((sug, i) => {\r\n            const { name, street, city, country } = sug.properties;\r\n            const full = [name, street, city, country].filter(Boolean).join(\", \");\r\n            return (\r\n              <button\r\n                key={i}\r\n                type=\"button\"\r\n                className=\"list-group-item list-group-item-action\"\r\n                onClick={() => handleSelect(sug)}\r\n              >\r\n                {full}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAEjD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,MAAM,MAAM,GAAG,GAAG;YACpB,eAAe,EAAE;YACjB;QACF;QAEA,MAAM,UAAU,WAAW;YACzB,MAAM,OAAO;YACb,MAAM,MAAM,CAAC,gCAAgC,EAAE,mBAAmB,OAAO,eAAe,EAAE,MAAM;YAEhG,MAAM,KACH,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;gBACJ,MAAM,iBAAiB,KAAK,QAAQ,IAAI,EAAE;gBAE1C,MAAM,YAAY,IAAI;gBAEtB,eAAe,OAAO,CAAC,CAAC;oBACtB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAI,UAAU;oBACtD,MAAM,OAAO;wBAAC;wBAAM;wBAAQ;wBAAM;qBAAQ,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC;oBAChE,IAAI,CAAC,UAAU,GAAG,CAAC,OAAO;wBACxB,UAAU,GAAG,CAAC,MAAM;oBACtB;gBACF;gBAEA,eAAe,MAAM,IAAI,CAAC,UAAU,MAAM;YAC5C,GACC,KAAK,CAAC,CAAA;gBACL,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,eAAe,EAAE;YACnB;QACJ,GAAG;QAEH,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;KAAM;IAEV,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,WAAW,UAAU;QAC7D,MAAM,OAAO;YAAC;YAAM;YAAQ;YAAM;SAAQ,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC;QAChE,SAAS;QACT,eAAe,EAAE;IACnB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,SAAQ;gBAAa,WAAU;0BAAa;;;;;;0BACnD,8OAAC;gBACC,MAAK;gBACL,WAAU;gBACV,IAAG;gBACH,MAAK;gBACL,QAAQ;gBACR,cAAa;gBACb,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;YAEzC,YAAY,MAAM,GAAG,mBACpB,8OAAC;gBAAI,WAAU;gBAAyC,OAAO;oBAAE,WAAW;oBAAK,WAAW;gBAAO;0BAChG,YAAY,GAAG,CAAC,CAAC,KAAK;oBACrB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAI,UAAU;oBACtD,MAAM,OAAO;wBAAC;wBAAM;wBAAQ;wBAAM;qBAAQ,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC;oBAChE,qBACE,8OAAC;wBAEC,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,aAAa;kCAE3B;uBALI;;;;;gBAQX;;;;;;;;;;;;AAKV","debugId":null}}]
}